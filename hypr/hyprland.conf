# --- CONFIGURACIÓN MÍNIMA DE HYPRLAND ---

# --- VARIABLES DE ENTORNO ---
env = SDL_VIDEODRIVER,wayland
env = _JAVA_AWT_WM_NONREPARENTING,1
env = QT_QPA_PLATFORM,wayland;xcb

# --- INICIO AUTOMÁTICO ---
# Iniciar la barra de estado
exec-once = waybar

# Iniciar el gestor de fondo de pantalla
exec-once = hyprpaper

# Iniciar un agente de notificaciones (lo instalaremos luego, pero déjalo comentado por ahora)
exec-once = dunst
exec-once = ~/.config/hypr/scripts/reset_portal.sh

# 1. MONITOR
# Auto-detectar monitor con la resolución preferida
monitor=,preferred,auto,1

# 2. ATAJOS PRINCIPALES (SUPER = Tecla Windows)
$mainMod = SUPER

# --- PANTALLA COMPLETA ---
bind = $mainMod, F, fullscreen

# Abrir terminal 
bind = $mainMod, RETURN, exec, kitty 

# Cerrar ventana activa
bind = $mainMod, Q, killactive

# Salir de Hyprland (Cerrar sesión)
bind = $mainMod, M, exit

# Abrir menú de aplicaciones (Wofi)
bind = $mainMod, R, exec, wofi --show drun

# Moverse entre ventanas con flechas
bind = $mainMod, left, movefocus, l
bind = $mainMod, right, movefocus, r
bind = $mainMod, up, movefocus, u
bind = $mainMod, down, movefocus, d

# --- CAPTURA DE PANTALLA ---

# 1. Captura completa con AVISO (Corregido)
# Usamos 'bash -c' para que funcione el aviso de notificación
bind = , Print, exec, bash -c "grim ~/Pictures/Screenshots/screenshot_$(date +'%Y-%-m%-d_%H-%M-%S').png && notify-send 'screenshot saved' 'Image saved in ~/Pictures/Screenshots'"

# 2. Captura estilo GNOME (Flameshot)
# Te permite seleccionar, redimensionar y luego Copiar (Ctrl+C) o Guardar (Ctrl+S)
bind = SHIFT, Print, exec, flameshot gui

# 3. ESTÉTICA BÁSICA
general {
    gaps_in = 5
    gaps_out = 10
    border_size = 2
    col.active_border = rgba(33ccffee)
    col.inactive_border = rgba(595959aa)
    layout = dwindle
}

decoration {
    rounding = 10
}

# 4. INPUT (Teclado y Mouse)
input {
    kb_layout = es,us  # lenguaje del teclado
    kb_options = grp:win_space_toggle # cambiar idioma del tecaldo con espacio
    follow_mouse = 1
    touchpad {
        # Esto invierte el scroll (como en el celular)
        natural_scroll = true
        # Opcional: desactivar clic al escribir para no mover el mouse por error
        disable_while_typing = true
    }
}

# Reglas para que Flameshot flote y no se deforme
windowrulev2 = noanim, class:^(flameshot)$
windowrulev2 = float, class:^(flameshot)$
windowrulev2 = move 0 0, class:^(flameshot)$
windowrulev2 = pin, class:^(flameshot)$
windowrulev2 = monitor 1, class:^(flameshot)$

# --- WORKSPACES (ESCRITORIOS) ---

# 1. Cambiarte de workspace (Ir al escritorio 1, 2, 3...)
bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5
bind = $mainMod, 6, workspace, 6
bind = $mainMod, 7, workspace, 7
bind = $mainMod, 8, workspace, 8
bind = $mainMod, 9, workspace, 9
bind = $mainMod, 0, workspace, 10

# 2. Mover la ventana activa a otro workspace (Enviar ventana al 1, 2, 3...)
# Se usa SHIFT + SUPER + Número
bind = $mainMod SHIFT, 1, movetoworkspace, 1
bind = $mainMod SHIFT, 2, movetoworkspace, 2
bind = $mainMod SHIFT, 3, movetoworkspace, 3
bind = $mainMod SHIFT, 4, movetoworkspace, 4
bind = $mainMod SHIFT, 5, movetoworkspace, 5
bind = $mainMod SHIFT, 6, movetoworkspace, 6
bind = $mainMod SHIFT, 7, movetoworkspace, 7
bind = $mainMod SHIFT, 8, movetoworkspace, 8
bind = $mainMod SHIFT, 9, movetoworkspace, 9
bind = $mainMod SHIFT, 0, movetoworkspace, 10

# 3. Moverse entre workspaces con la rueda del mouse (estando en el escritorio vacío)
bind = $mainMod, mouse_down, workspace, e+1
bind = $mainMod, mouse_up, workspace, e-1

# --- MOUSE ---
# Mover ventana: SUPER + Click Izquierdo sostenido
bindm = $mainMod, mouse:272, movewindow

# Redimensionar ventana: SUPER + Click Derecho sostenido
bindm = $mainMod, mouse:273, resizewindow
